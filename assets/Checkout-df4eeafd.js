import{j as l,a,b as D,c as h,d as C,w as S,p as b,i as x,r as p,u as f,e as I,s as B,R as v,f as N}from"./index-3bc71bf2.js";import{i as O}from"./Input-5caf40bc.js";const V="_CheckoutSummary_1m2n5_1",F={CheckoutSummary:V},R=e=>l("div",{className:F.CheckoutSummary,children:[a("h1",{children:"We hope it tastes well!"}),a("div",{style:{width:"100%",margin:"auto"},children:a(D,{ingredients:e.ingredients})}),a(h,{btnType:"Danger",clicked:e.checkoutCancelled,children:"CANCEL"}),a(h,{btnType:"Success",clicked:e.checkoutContinued,children:"CONTINUE"})]}),_="_ContactData_1scxe_1",q={ContactData:_},H=e=>{const[n,o]=p.useState({name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Name"},value:"",validation:{required:!0},valid:!1,touched:!1},street:{elementType:"input",elementConfig:{type:"text",placeholder:"Street"},value:"",validation:{required:!0},valid:!1,touched:!1},zipCode:{elementType:"input",elementConfig:{type:"text",placeholder:"ZIP Code"},value:"",validation:{required:!0,minLength:5,maxLength:5,isNumeric:!0},valid:!1,touched:!1},country:{elementType:"input",elementConfig:{type:"text",placeholder:"Country"},value:"",validation:{required:!0},valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:"Your E-Mail"},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},deliveryMethod:{elementType:"select",elementConfig:{options:[{value:"fastest",displayValue:"Fastest"},{value:"cheapest",displayValue:"Cheapest"}]},value:"fastest",validation:{},valid:!0}}),[c,d]=p.useState(!1),y=t=>{t.preventDefault();const r={};for(let i in n)r[i]=n[i].value;const u={ingredients:e.ings,price:e.price,orderData:r,userId:e.userId};e.onOrderBurger(u,e.token)},k=(t,r)=>{const u=f(n[r],{value:t.target.value,valid:I(t.target.value,n[r].validation),touched:!0}),i=f(n,{[r]:u});let s=!0;for(let T in i)s=i[T].valid&&s;o(i),d(s)},m=[];for(let t in n)m.push({id:t,config:n[t]});let g=l("form",{onSubmit:y,children:[m.map(t=>a(O,{elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,invalid:!t.config.valid,shouldValidate:t.config.validation,touched:t.config.touched,changed:r=>k(r,t.id)},t.id)),a(h,{btnType:"Success",disabled:!c,children:"ORDER"})]});return e.loading&&(g=a(B,{})),l("div",{className:q.ContactData,children:[a("h4",{children:"Enter your Contact Data"}),g]})},P=e=>({ings:e.burgerBuilder.ingredients,price:e.burgerBuilder.totalPrice,loading:e.order.loading,token:e.auth.token,userId:e.auth.userId}),$=e=>({onOrderBurger:(n,o)=>e(b(n,o))}),j=C(P,$)(S(H,x)),w=e=>{const n=()=>{e.history.goBack()},o=()=>{e.history.replace("/checkout/contact-data")};let c=a(v,{to:"/"});if(e.ings){const d=e.purchased?a(v,{to:"/"}):null;c=l("div",{children:[d,a(R,{ingredients:e.ings,checkoutCancelled:n,checkoutContinued:o}),a(N,{path:e.match.path+"/contact-data",component:j})]})}return c},E=e=>({ings:e.burgerBuilder.ingredients,purchased:e.order.purchased}),M=C(E)(w);export{M as default};
