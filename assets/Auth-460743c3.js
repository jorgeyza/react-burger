import{d as R,r,a as u,R as w,j as s,c as A,h as C,k as I,u as v,e as _,s as k}from"./index-3bc71bf2.js";import{i as j}from"./Input-5caf40bc.js";const x="_Auth_80uw6_1",B="_AuthTitle_80uw6_11",m={Auth:x,AuthTitle:B},H=e=>{const[a,l]=r.useState({email:{elementType:"input",elementConfig:{type:"email",placeholder:"Mail Address"},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},value:"",validation:{required:!0,minLength:6},valid:!1,touched:!1}}),[i,T]=r.useState(!0),{buildingBurger:d,authRedirectPath:o,onSetAuthRedirectPath:c}=e;r.useEffect(()=>{!d&&o!=="/"&&c()},[d,o,c]);const S=(t,n)=>{const b=v(a,{[n]:v(a[n],{value:t.target.value,valid:_(t.target.value,a[n].validation),touched:!0})});l(b)},y=t=>{t.preventDefault(),e.onAuth(a.email.value,a.password.value,i)},P=()=>{T(!i)},h=[];for(let t in a)h.push({id:t,config:a[t]});let g=h.map(t=>u(j,{elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,invalid:!t.config.valid,shouldValidate:t.config.validation,touched:t.config.touched,changed:n=>S(n,t.id)},t.id));e.loading&&(g=u(k,{}));let p=null;e.error&&(p=u("p",{children:e.error.message}));let f=null;return e.isAuthenticated&&(f=u(w,{to:e.authRedirectPath})),s("div",{className:m.Auth,children:[u("h2",{className:m.AuthTitle,children:i?"Sign Up":"Login"}),f,p,s("form",{onSubmit:y,children:[g,u(A,{btnType:"Success",children:"SUBMIT"})]}),s(A,{clicked:P,btnType:"Danger",children:["SWITCH TO ",i?"SIGNIN":"SIGNUP"]})]})},M=e=>({loading:e.auth.loading,error:e.auth.error,isAuthenticated:e.auth.token!==null,buildingBurger:e.burgerBuilder.building,authRedirectPath:e.auth.authRedirectPath}),D=e=>({onAuth:(a,l,i)=>e(C(a,l,i)),onSetAuthRedirectPath:()=>e(I("/"))}),q=R(M,D)(H);export{q as default};
